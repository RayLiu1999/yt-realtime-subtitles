# 01 Â· å°ˆæ¡ˆæ¦‚è¦½èˆ‡ç³»çµ±æ¶æ§‹

## å°ˆæ¡ˆç°¡ä»‹

**YT å³æ™‚ç¿»è­¯å­—å¹•** æ˜¯ä¸€å€‹ Chrome ç€è¦½å™¨æ“´å……åŠŸèƒ½ï¼Œå¯å° YouTube å½±ç‰‡/ç›´æ’­é€²è¡Œå³æ™‚èªéŸ³è¾¨è­˜ä¸¦ç¿»è­¯ï¼Œå­—å¹•ç›´æ¥ç–ŠåŠ åœ¨æ’­æ”¾å™¨ä¸Šï¼Œå®Œå…¨ä¸éœ€è¦åˆ‡æ›è¦–çª—æˆ–åˆ†é ã€‚

### æ ¸å¿ƒç‰¹è‰²

| ç‰¹è‰²         | èªªæ˜                                             |
| ------------ | ------------------------------------------------ |
| å³æ™‚èªéŸ³è¾¨è­˜ | ä½¿ç”¨ Deepgram Nova-2 æ¨¡å‹ï¼Œå»¶é²ç´„ 500msâ€“1s       |
| é›™å¼•æ“ç¿»è­¯   | Google Translate + DeepL Round-Robin è¼ªæµåˆ‡æ›    |
| ç„¡æ„Ÿæ³¨å…¥     | æŒ‰éˆ•ç›´æ¥æ’å…¥ YouTube åŸç”Ÿæ§åˆ¶åˆ—ï¼Œè¦–è¦ºä¸Šæ¸¾ç„¶å¤©æˆ  |
| SPA ç›¸å®¹     | æ”¯æ´ YouTube çš„ Single-Page Application é é¢åˆ‡æ› |
| é›™èªå­—å¹•     | åŸæ–‡ï¼ˆå°å­—åŠé€æ˜ï¼‰+ ç¿»è­¯ï¼ˆç™½å­—å¤§å­—ï¼‰åŒæ™‚é¡¯ç¤º     |
| æ­·å²ç´€éŒ„     | è‡ªå‹•å„²å­˜è‡³ `chrome.storage.local`ï¼Œå¯åŒ¯å‡º JSON   |

---

## æŠ€è¡“æ£§

```
Chrome Extension (Manifest V3)
  â”œâ”€â”€ content.js       â€” DOM æ³¨å…¥ã€éŸ³è¨Šæ“·å–ã€WebSocket é€šè¨Šã€å­—å¹•æ¸²æŸ“
  â”œâ”€â”€ background.js    â€” Service Workerï¼Œç®¡ç†è·¨é é¢ç‹€æ…‹
  â”œâ”€â”€ popup.html/js    â€” æ­·å²ç´€éŒ„èˆ‡è¨­å®šä»‹é¢
  â””â”€â”€ style.css        â€” å­—å¹•èˆ‡æ§åˆ¶åˆ—æ¨£å¼

Go Backend
  â”œâ”€â”€ config/          â€” ç’°å¢ƒè®Šæ•¸è¼‰å…¥èˆ‡é©—è­‰
  â”œâ”€â”€ handler/
  â”‚   â”œâ”€â”€ health.go    â€” GET /health å¥åº·æª¢æŸ¥
  â”‚   â””â”€â”€ websocket.go â€” WS /ws æ ¸å¿ƒç«¯é»
  â””â”€â”€ service/
      â”œâ”€â”€ deepgram.go  â€” Deepgram STT WebSocket ä¸²æµå®¢æˆ¶ç«¯
      â””â”€â”€ translator.go â€” Round-Robin ç¿»è­¯æœå‹™ï¼ˆGoogle + DeepLï¼‰
```

---

## ç³»çµ±è³‡æ–™æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   YouTube <video>    â”‚
â”‚   æ¨™ç±¤ (DOM)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ createMediaElementSource()
           â”‚ (Web Audio API)
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            AudioStreamer (content.js)         â”‚
â”‚                                              â”‚
â”‚  mediaSource â”€â”€â–º destination  (æ­£å¸¸æ’­æ”¾)      â”‚
â”‚  mediaSource â”€â”€â–º ScriptProcessor             â”‚
â”‚                      â”‚ onaudioprocess        â”‚
â”‚                      â”‚ Float32 â†’ Int16 PCM   â”‚
â”‚                      â”‚ 0.5s / 8000 samples   â”‚
â”‚                      â–¼                       â”‚
â”‚              WebSocket.send(buffer)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ Binary PCM (16kHz, mono)
                       â”‚ WS Binary Frames
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Go Backend (:8080/ws)             â”‚
â”‚                                              â”‚
â”‚  ReadMessage(BinaryMessage)                  â”‚
â”‚       â”‚                                      â”‚
â”‚       â–¼                                      â”‚
â”‚  DeepgramClient.Send()  â”€â”€â–º Deepgram API     â”‚
â”‚                              (WSS Nova-2)    â”‚
â”‚  â—„â”€â”€ onResult(transcript, isFinal)           â”‚
â”‚       â”‚                                      â”‚
â”‚       â”œâ”€â”€ isFinal=false â†’ log only (ç•¥é)    â”‚
â”‚       â””â”€â”€ isFinal=true                       â”‚
â”‚               â”‚                              â”‚
â”‚               â–¼                              â”‚
â”‚  RoundRobinTranslator.Translate()            â”‚
â”‚       â”œâ”€â”€ Google Translate API               â”‚
â”‚       â””â”€â”€ DeepL API (å‚™æ´)                   â”‚
â”‚               â”‚                              â”‚
â”‚               â–¼                              â”‚
â”‚  WebSocket.WriteMessage(JSON)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ JSON { type, text, original }
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Content Script (handleServerMessage)   â”‚
â”‚  translation â†’ addSubtitleLine()             â”‚
â”‚             â†’ é¡¯ç¤º 3 ç§’å¾Œè‡ªå‹•æ¸…é™¤            â”‚
â”‚             â†’ historyEntries.push()          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç›®éŒ„çµæ§‹

```
yt-video-subtitles/
â”œâ”€â”€ SPEC.md                   # åŸå§‹éœ€æ±‚è¦æ ¼æ›¸
â”œâ”€â”€ README.md                 # å¿«é€Ÿå•Ÿå‹•èªªæ˜
â”œâ”€â”€ docs/                     # ğŸ“š æœ¬æ–‡ä»¶ç›®éŒ„
â”‚   â”œâ”€â”€ 01-project-overview.md
â”‚   â”œâ”€â”€ 02-getting-started.md
â”‚   â”œâ”€â”€ 03-backend-guide.md
â”‚   â”œâ”€â”€ 04-frontend-guide.md
â”‚   â”œâ”€â”€ 05-audio-pipeline.md
â”‚   â”œâ”€â”€ 06-api-reference.md
â”‚   â””â”€â”€ 07-interview-qa.md
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ .env                  # å¯¦éš› API Keyï¼ˆå·²åŠ å…¥ .gitignoreï¼‰
â”‚   â”œâ”€â”€ .env.example          # API Key ç¯„ä¾‹æ ¼å¼
â”‚   â”œâ”€â”€ go.mod / go.sum
â”‚   â”œâ”€â”€ main.go
â”‚   â”œâ”€â”€ config/config.go
â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â”œâ”€â”€ health.go
â”‚   â”‚   â””â”€â”€ websocket.go
â”‚   â””â”€â”€ service/
â”‚       â”œâ”€â”€ deepgram.go
â”‚       â””â”€â”€ translator.go
â””â”€â”€ extension/
    â”œâ”€â”€ manifest.json
    â”œâ”€â”€ background.js
    â”œâ”€â”€ content.js
    â”œâ”€â”€ style.css
    â”œâ”€â”€ popup.html
    â”œâ”€â”€ popup.js
    â”œâ”€â”€ popup.css
    â””â”€â”€ icons/
```

---

## å¤–éƒ¨æœå‹™ä¾è³´

| æœå‹™                                                               | ç”¨é€”                | è²»ç”¨æ¨¡å¼                        |
| ------------------------------------------------------------------ | ------------------- | ------------------------------- |
| [Deepgram](https://deepgram.com)                                   | å³æ™‚èªéŸ³è¾¨è­˜ï¼ˆSTTï¼‰ | æ¶ˆè€—å‹è¨ˆè²»ï¼Œæœ‰å…è²»é¡åº¦          |
| [Google Cloud Translation API](https://cloud.google.com/translate) | ç¿»è­¯æœå‹™ï¼ˆä¸»è¦ï¼‰    | æ¯æœˆå‰ 50 è¬å­—å…ƒå…è²»            |
| [DeepL API](https://www.deepl.com/pro-api)                         | ç¿»è­¯æœå‹™ï¼ˆå‚™æ´ï¼‰    | æ¯æœˆ 50 è¬å­—å…ƒå…è²»ï¼ˆFree Tierï¼‰ |

---

## ä¸‹ä¸€æ­¥

- ğŸ“– [å¿«é€Ÿä¸Šæ‰‹æŒ‡å— â†’](./02-getting-started.md)
- ğŸ”§ [å¾Œç«¯æ¶æ§‹è©³è§£ â†’](./03-backend-guide.md)
- ğŸ”Œ [å‰ç«¯æ“´å……åŠŸèƒ½è©³è§£ â†’](./04-frontend-guide.md)
